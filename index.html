<!DOCTYPE html>
<html>

<head></head>

<body>
    <script type="module" type="text/javascript" src="/main.js"></script>
    <!-- <script type="module" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js"></script> -->
    <body onload="init()">
        <div id="canvas">

        </div>
        <div style="position: absolute;
                    right: 0px;
                    width: 33%;
                    border: 3px solid #73AD21;
                    padding: 10px;">
            <input id="fileInput" type="file" name="file" accept='.stl' />
            <pre id="fileContent"></pre>
            <div class="slidecontainer">
                <p>Move Left Axle X</p><input class="leftxslider" type="range" min="1" max="100" value="50"
                    class="slider" id="myRange1">
            </div>
            <div class="slidecontainer">
                <p>Move Right Axle X</p><input class="rightxslider" type="range" min="1" max="100" value="50"
                    class="slider" id="myRange2">
            </div>
            <div class="slidecontainer">
                <p>Move Axles Y</p><input class="yslider" type="range" min="1" max="100" value="50" class="slider"
                    id="myRange3">
            </div>
            <input id="clickMe" type="button" value="Export" onclick="stlexport" />
        </div>
    </body>

    <script>
        //citation: https://stackoverflow.com/questions/16505333/get-the-data-of-uploaded-file-in-javascript
        function init() {
            document.getElementById('fileInput').addEventListener('change', handleFileSelect, false);
        }

        function handleFileSelect(event) {
            const reader = new FileReader()
            reader.onload = handleFileLoad;
            reader.readAsText(event.target.files[0])
        }

        function handleFileLoad(event) {
            //do stuff on fileupload HERE
            var fu1 = document.getElementById("fileInput");
            console.log("You selected " + fu1.value.split("\\").pop());
            //document.getElementById('fileContent').textContent = 'oh yeah';
        }

        var sliderleftx = document.getElementById("myRange1");
        var sliderrightx = document.getElementById("myRange2");
        var slidery = document.getElementById("myRange3");

        //DO THREEJS STUFF HERE RE MOVING AXLES
        sliderleftx.oninput = function () {
            console.log(this.value)
        }
        sliderrightx.oninput = function () {
            console.log(this.value)
        }
        slidery.oninput = function () {
            console.log(this.value)
        }


    </script>

</body>

</html>